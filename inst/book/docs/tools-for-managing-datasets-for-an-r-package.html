<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Tools for Managing Datasets for an R Package | The nigeriaPITaudit Story: Creating an R Package</title>
  <meta name="description" content="Chapter 3 Tools for Managing Datasets for an R Package | The nigeriaPITaudit Story: Creating an R Package" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Tools for Managing Datasets for an R Package | The nigeriaPITaudit Story: Creating an R Package" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Tools for Managing Datasets for an R Package | The nigeriaPITaudit Story: Creating an R Package" />
  
  
  

<meta name="author" content="Lawrence Daniel Garba" />


<meta name="date" content="2025-04-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-in-the-nigeriapitaudit-package.html"/>
<link rel="next" href="preparing-your-datasets-for-an-r-package.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-in-the-nigeriapitaudit-package.html"><a href="data-in-the-nigeriapitaudit-package.html"><i class="fa fa-check"></i><b>2</b> Data in the nigeriaPITaudit Package</a></li>
<li class="chapter" data-level="3" data-path="tools-for-managing-datasets-for-an-r-package.html"><a href="tools-for-managing-datasets-for-an-r-package.html"><i class="fa fa-check"></i><b>3</b> Tools for Managing Datasets for an R Package</a></li>
<li class="chapter" data-level="4" data-path="preparing-your-datasets-for-an-r-package.html"><a href="preparing-your-datasets-for-an-r-package.html"><i class="fa fa-check"></i><b>4</b> Preparing Your Datasets for an R Package</a></li>
<li class="chapter" data-level="5" data-path="adding-datasets-to-an-r-package.html"><a href="adding-datasets-to-an-r-package.html"><i class="fa fa-check"></i><b>5</b> Adding Datasets to an R Package</a></li>
<li class="chapter" data-level="6" data-path="documenting-your-datasets.html"><a href="documenting-your-datasets.html"><i class="fa fa-check"></i><b>6</b> Documenting your Datasets</a></li>
<li class="chapter" data-level="7" data-path="best-practices-for-including-datasets-in-r-packages.html"><a href="best-practices-for-including-datasets-in-r-packages.html"><i class="fa fa-check"></i><b>7</b> Best Practices for Including Datasets in R Packages</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The nigeriaPITaudit Story: Creating an R Package</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tools-for-managing-datasets-for-an-r-package" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Tools for Managing Datasets for an R Package<a href="tools-for-managing-datasets-for-an-r-package.html#tools-for-managing-datasets-for-an-r-package" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Managing datasets within an R package is an essential part of the package development process. Datasets must be prepared, documented, tested, and distributed efficiently, and there are a range of tools that help accomplish these tasks seamlessly. In this chapter, we will explore the key tools commonly used in R package development, such as devtools, usethis, roxygen2, and testthat.
These tools help streamline the process of dataset integration, documentation, testing, and overall package development. We will delve into the functionality of these tools and show how they can be used to manage your datasets effectively.</p>
<p><strong>2.1 Introduction to Dataset Management Tools</strong></p>
<p>In R package development, effective management of datasets involves more than just loading and saving data. It requires the integration of datasets into the package structure, documenting their usage, ensuring data integrity, and performing systematic testing. Tools are essential for facilitating each of these tasks, automating common processes, and improving the overall efficiency of package development.</p>
<p>Without the right tools, managing datasets can become cumbersome, especially when working with large datasets or complex workflows. By using the correct tools, package developers can:</p>
<p>• Streamline the integration of datasets: Tools like devtools and usethis simplify the process of adding, saving, and building datasets into the package.</p>
<p>• Document datasets comprehensively: roxygen2 allows for seamless documentation of datasets within the package, ensuring that users can understand and make use of the data.</p>
<p>• Test dataset integrity: testthat facilitates the creation of tests for validating dataset contents, such as checking for missing values, proper column names, or data types.</p>
<p>• Distribute datasets efficiently: Proper packaging of datasets using tools like tools ensures that they are appropriately compressed and formatted for distribution to users.</p>
<p>In the following sections, we will explore these tools in greater detail and show how to use them for managing datasets effectively within an R package.</p>
<p><strong>2.2 Overview of Core Tools for Dataset Management</strong></p>
<p>There are several core tools in the R ecosystem that help in managing datasets for R packages. Let’s look at these tools, their functionalities, and how they fit into the package development workflow.</p>
<p><strong>2.2.1 devtools</strong></p>
<p>• devtools is a comprehensive tool that simplifies many aspects of R package development. It includes functions for creating packages, building, testing, and loading the package. It also helps with managing datasets, specifically by using the use_data() function to save datasets in a structured and reproducible way.</p>
<p><strong>2.2.2 usethis</strong></p>
<p>• usethis is designed to make package development easier by creating common files, folders, and structures. It allows you to create a data-raw/ folder for raw data, automate the generation of functions for data preprocessing, and streamline the management of package dependencies.</p>
<p><strong>2.2.3 roxygen2</strong></p>
<p>• roxygen2 is used for documenting R functions and datasets. It enables you to generate documentation directly from R code using special comments (tags like <span class="citation">@format</span>, <span class="citation">@source</span>, etc.). This tool is integral to ensuring that the datasets within the package are well-documented and easily accessible to users.</p>
<p><strong>2.2.4 testthat</strong></p>
<p>• testthat is a testing framework for R that allows you to write unit tests for your package. With testthat, you can create tests to ensure that datasets are consistent and meet specified conditions (e.g., checking if variables have the correct types, whether there are missing values, etc.).</p>
<p><strong>2.2.5 Data Preprocessing Tools (Optional)</strong></p>
<p>• data.table: A package optimized for high-performance data manipulation, useful when preprocessing large datasets before they are saved into your package. • dplyr: A package that provides a set of tools for data manipulation, such as filtering, grouping, and summarizing data.</p>
<p>• readr: A package that helps with reading and writing data files efficiently, including CSV and other text-based formats. By leveraging these tools, you can effectively manage the datasets included in your R package and ensure that they are clean, well-documented, and tested.</p>
<p><strong>2.3 Using the devtools Package</strong></p>
<p>devtools is a primary tool for package development in R. It simplifies many tasks related to package creation, building, and testing. Below are the key functions in devtools that you’ll use when managing datasets.</p>
<p><strong>2.3.1 Creating Packages:</strong></p>
<p>• The devtools::create() function allows you to create a new R package. It sets up the necessary structure for your package, including folders for R functions, data, and documentation.</p>
<p>• Example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb5-1" tabindex="-1"></a><span class="co"># devtools::create(&quot;myPackage&quot;)</span></span></code></pre></div>
<p><strong>2.3.2 Loading and Building Packages:</strong></p>
<p>• devtools::load_all() loads the entire package so that any changes made are reflected immediately, allowing you to test your code without rebuilding the package every time.</p>
<p>• Example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb6-1" tabindex="-1"></a><span class="co"># devtools::load_all()</span></span></code></pre></div>
<p><strong>2.3.3 Working with use_data(), check(), and load_all():</strong></p>
<p>• use_data(): Saves your dataset in the data/ directory of your package. It also ensures the dataset is saved in an efficient .rda format.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb7-1" tabindex="-1"></a><span class="co"># devtools::use_data(my_dataset)</span></span></code></pre></div>
<p>• check(): Runs various checks on your package, ensuring it follows R’s package standards and is ready for submission to CRAN.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb8-1" tabindex="-1"></a><span class="co"># devtools::check()</span></span></code></pre></div>
<p><strong>2.4 Using the usethis Package</strong></p>
<p>usethis is a powerful tool that automates common tasks in package development, such as creating folders and files, managing dependencies, and simplifying the process of creating R functions for reproducible workflows.</p>
<p><strong>2.4.1 Creating Folders Like data-raw/:</strong></p>
<p>• The usethis::use_data_raw() function creates the data-raw/ folder, which is used for storing raw datasets that need preprocessing before they are included in the package.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb9-1" tabindex="-1"></a><span class="co"># usethis::use_data_raw()</span></span></code></pre></div>
<p><strong>2.4.2 Using use_data_raw() and use_data():</strong></p>
<p>• use_data_raw(): This function helps you set up the infrastructure for raw data. You can then preprocess and save the data using use_data() once it’s ready.</p>
<p>• use_data(): Saves preprocessed datasets into the data/ folder in .rda format.</p>
<p><strong>2.4.3 Creating .R Files for Reproducible Preprocessing:,</strong></p>
<p>• It is essential to ensure that any preprocessing steps applied to raw data are reproducible. usethis can generate .R files containing the code to preprocess data, ensuring others can reproduce the steps.</p>
<p><strong>2.5 Using the roxygen2 Package</strong></p>
<p>roxygen2 is an essential tool for documenting your datasets and functions within an R package. It allows you to annotate your R code with special comments, which are then converted into formal documentation.</p>
<p><strong>2.5.1 Documenting Datasets with <span class="citation">@format</span>, <span class="citation">@source</span>, <span class="citation">@examples</span>:</strong></p>
<p>• <span class="citation">@format</span>: Describes the structure of the dataset (e.g., the number of rows, columns, and the types of variables).</p>
<p>• <span class="citation">@source</span>: Provides a reference to the source of the dataset, such as the original publisher or data repository.</p>
<p>• <span class="citation">@examples</span>: Includes usage examples, showing how to load and use the dataset in R.</p>
<p>Example documentation:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-1" tabindex="-1"></a><span class="co">#&#39; My Dataset</span></span>
<span id="cb10-2"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-2" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb10-3"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-3" tabindex="-1"></a><span class="co">#&#39; A dataset containing information about XYZ.</span></span>
<span id="cb10-4"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-4" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb10-5"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-5" tabindex="-1"></a><span class="co">#&#39; @format A data frame with 100 rows and 5 columns:</span></span>
<span id="cb10-6"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-6" tabindex="-1"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb10-7"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-7" tabindex="-1"></a><span class="co">#&#39;   \item{column1}{Description of column 1}</span></span>
<span id="cb10-8"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-8" tabindex="-1"></a><span class="co">#&#39;   \item{column2}{Description of column 2}</span></span>
<span id="cb10-9"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-9" tabindex="-1"></a><span class="co">#&#39; }</span></span>
<span id="cb10-10"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-10" tabindex="-1"></a><span class="co">#&#39; @source Source of the dataset</span></span>
<span id="cb10-11"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-11" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb10-12"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-12" tabindex="-1"></a><span class="co">#&#39; data(my_dataset)</span></span>
<span id="cb10-13"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-13" tabindex="-1"></a><span class="co">#&#39; head(my_dataset)</span></span>
<span id="cb10-14"><a href="tools-for-managing-datasets-for-an-r-package.html#cb10-14" tabindex="-1"></a><span class="st">&quot;my_dataset&quot;</span></span></code></pre></div>
<p><strong>2.5.2 Running devtools::document():</strong></p>
<p>• After annotating your dataset with roxygen2 comments, use devtools::document() to generate the documentation files for your package.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb11-1" tabindex="-1"></a><span class="co"># devtools::document()</span></span></code></pre></div>
<p><strong>2.6 Using the testthat Package</strong></p>
<p>testthat allows you to write unit tests for your datasets to ensure data integrity and consistency. These tests can verify that the dataset meets specified conditions, such as having the correct column names, types, and handling missing values.</p>
<p><strong>2.6.1 Writing Tests for Your Datasets:</strong></p>
<p>• Example tests include verifying column names, ensuring no missing values, or checking for specific data types in columns.</p>
<p>test_that(“dataset has expected columns”,{
expect_true(“column1” %in% colnames(my_dataset))
})</p>
<p><strong>2.6.2 Integrating with Continuous Testing Workflow:</strong></p>
<p>• Integrate testthat into your continuous integration (CI) system to automatically test your datasets whenever changes are made.</p>
<p><strong>2.7 Other Helpful Tools and Utilities</strong></p>
<p>In addition to the core tools mentioned above, there are several other utilities that can assist with managing datasets.</p>
<p><strong>2.7.1 tools::checkRdaFiles() and tools::resaveRdaFiles():</strong></p>
<p>• checkRdaFiles(): Checks if .rda files are properly formatted and can be loaded correctly.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="tools-for-managing-datasets-for-an-r-package.html#cb12-1" tabindex="-1"></a><span class="co"># tools::checkRdaFiles(&quot;path/to/dataset.rda&quot;)</span></span></code></pre></div>
<p>• resaveRdaFiles(): Resaves .rda files with compression to optimize file size.</p>
<p>• tools::resaveRdaFiles(“path/to/dataset.rda”)</p>
<p><strong>2.7.2 Other Helpful Packages</strong></p>
<p>• janitor: This package provides functions for cleaning data, such as removing empty columns or rows, renaming variables, and checking for duplicate values.</p>
<p>• readr: A package for reading and writing data files efficiently, especially useful for importing data before it is processed and saved into your package.</p>
<p>• data.table: A high-performance package for manipulating large datasets efficiently.</p>
<p><strong>2.8 Conclusion</strong></p>
<p>The tools discussed in this chapter are vital for effective dataset management in R package development. By leveraging tools like devtools, usethis, roxygen2, and testthat, you can streamline the process of adding, documenting, testing, and distributing datasets within your R package. These tools not only improve the efficiency of your workflow but also help maintain high standards for data integrity and reproducibility. As your package evolves, these tools will ensure that your datasets are well-managed and accessible to other users.</p>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-in-the-nigeriapitaudit-package.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="preparing-your-datasets-for-an-r-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": null,
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

</body>

</html>
